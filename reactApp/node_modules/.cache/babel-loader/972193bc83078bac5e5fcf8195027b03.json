{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\MrSpeedy\\\\Desktop\\\\Local Github\\\\MoviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"C:\\\\Users\\\\MrSpeedy\\\\Desktop\\\\Local Github\\\\MoviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\MrSpeedy\\\\Desktop\\\\Local Github\\\\MoviesApp\\\\src\\\\contexts\\\\moviesContext.js\";\nimport React, { useEffect, createContext, useReducer } from \"react\";\nimport { getMovies, getUpcomingMovies, getMostPopular, getTopRated, getNowPlaying, getSimilarMovies } from \"../api/tmdb-api\";\nexport var MoviesContext = createContext(null);\n\nvar reducer = (state, action) => {\n  switch (action.type) {\n    case \"add-favorite\":\n      return {\n        movies: state.movies.map(m => m.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, m), {}, {\n          favorite: true\n        }) : m),\n        mostpopular: state.mostpopular.map(p => p.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, p), {}, {\n          favourite: true\n        }) : p),\n        nowplaying: state.nowplaying.map(n => n.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, n), {}, {\n          favourite: true\n        }) : n),\n        toprated: state.toprated.map(t => t.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, t), {}, {\n          favourite: true\n        }) : t),\n        similar: state.similar.map(t => t.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, t), {}, {\n          favourite: true\n        }) : t),\n        upcoming: [...state.upcoming]\n      };\n\n    case \"add-watchlist\":\n      return {\n        upcoming: state.upcoming.map(m => m.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, m), {}, {\n          watchlist: true\n        }) : m),\n        movies: [...state.movies],\n        mostpopular: [...state.mostpopular],\n        toprated: [...state.toprated],\n        nowplaying: [...state.nowplaying],\n        similar: [...state.similar]\n      };\n\n    case \"load\":\n      return {\n        movies: action.payload.movies,\n        upcoming: [...state.upcoming],\n        mostpopular: [...state.mostpopular],\n        toprated: [...state.toprated],\n        nowplaying: [...state.nowplaying],\n        similar: [...state.similar]\n      };\n\n    case \"load-upcoming\":\n      return {\n        upcoming: action.payload.movies,\n        movies: [...state.movies],\n        mostpopular: [...state.mostpopular],\n        toprated: [...state.toprated],\n        nowplaying: [...state.nowplaying],\n        similar: [...state.similar]\n      };\n\n    case \"load-mostpopular\":\n      return {\n        mostpopular: action.payload.movies,\n        upcoming: [...state.upcoming],\n        movies: [...state.movies],\n        toprated: [...state.toprated],\n        nowplaying: [...state.nowplaying],\n        similar: [...state.similar]\n      };\n\n    case \"load-toprated\":\n      return {\n        toprated: action.payload.movies,\n        upcoming: [...state.upcoming],\n        movies: [...state.movies],\n        mostpopular: [...state.mostpopular],\n        nowplaying: [...state.nowplaying],\n        similar: [...state.similar]\n      };\n\n    case \"load-nowplaying\":\n      return {\n        nowplaying: action.payload.movies,\n        upcoming: [...state.upcoming],\n        movies: [...state.movies],\n        mostpopular: [...state.mostpopular],\n        toprated: [...state.toprated],\n        similar: [...state.similar]\n      };\n\n    case \"load-similar\":\n      return {\n        similar: action.payload.movies,\n        upcoming: [...state.upcoming],\n        movies: [...state.movies],\n        mostpopular: [...state.mostpopular],\n        toprated: [...state.toprated],\n        nowplaying: [...state.nowplaying]\n      };\n\n    case \"add-review\":\n      return {\n        movies: state.movies.map(m => m.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, m), {}, {\n          review: action.payload.review\n        }) : m),\n        upcoming: [...state.upcoming],\n        mostpopular: [...state.mostpopular],\n        toprated: [...state.toprated],\n        nowplaying: [...state.nowplaying]\n      };\n\n    default:\n      return state;\n  }\n};\n\nvar MoviesContextProvider = props => {\n  var _useReducer = useReducer(reducer, {\n    movies: [],\n    upcoming: [],\n    mostpopular: [],\n    toprated: [],\n    nowplaying: []\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var addToFavorites = movieId => {\n    var index = state.movies.map(m => m.id).indexOf(movieId);\n    dispatch({\n      type: \"add-favorite\",\n      payload: {\n        movie: state.movies[index],\n        mostpopular: state.mostpopular[index],\n        toprated: state.toprated[index],\n        nowplaying: state.nowplaying[index]\n      }\n    });\n  };\n\n  var addToWatchList = movieId => {\n    var index = state.upcoming.map(m => m.id).indexOf(movieId);\n    dispatch({\n      type: \"add-watchlist\",\n      payload: {\n        movie: state.upcoming[index]\n      }\n    });\n  };\n\n  var addReview = (movie, review) => {\n    dispatch({\n      type: \"add-review\",\n      payload: {\n        movie,\n        review\n      }\n    });\n  };\n\n  useEffect(() => {\n    getMovies().then(movies => {\n      dispatch({\n        type: \"load\",\n        payload: {\n          movies\n        }\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    getUpcomingMovies().then(movies => {\n      dispatch({\n        type: \"load-upcoming\",\n        payload: {\n          movies\n        }\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    getMostPopular().then(movies => {\n      dispatch({\n        type: \"load-mostpopular\",\n        payload: {\n          movies\n        }\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    getTopRated().then(movies => {\n      dispatch({\n        type: \"load-toprated\",\n        payload: {\n          movies\n        }\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    getNowPlaying().then(movies => {\n      dispatch({\n        type: \"load-nowplaying\",\n        payload: {\n          movies\n        }\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/React.createElement(MoviesContext.Provider, {\n    value: {\n      movies: state.movies,\n      upcoming: state.upcoming,\n      mostpopular: state.mostpopular,\n      toprated: state.toprated,\n      nowplaying: state.nowplaying,\n      addToFavorites: addToFavorites,\n      addToWatchList: addToWatchList,\n      addReview: addReview\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default MoviesContextProvider;","map":{"version":3,"sources":["C:/Users/MrSpeedy/Desktop/Local Github/MoviesApp/src/contexts/moviesContext.js"],"names":["React","useEffect","createContext","useReducer","getMovies","getUpcomingMovies","getMostPopular","getTopRated","getNowPlaying","getSimilarMovies","MoviesContext","reducer","state","action","type","movies","map","m","id","payload","movie","favorite","mostpopular","p","favourite","nowplaying","n","toprated","t","similar","upcoming","watchlist","review","MoviesContextProvider","props","dispatch","addToFavorites","movieId","index","indexOf","addToWatchList","addReview","then","children"],"mappings":"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","sourcesContent":["import React, { useEffect, createContext, useReducer } from \"react\";\r\nimport { getMovies, getUpcomingMovies, getMostPopular, getTopRated, getNowPlaying, getSimilarMovies } from \"../api/tmdb-api\";\r\n\r\nexport const MoviesContext = createContext(null);\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"add-favorite\":\r\n      return {\r\n        movies: state.movies.map((m) =>\r\n          m.id === action.payload.movie.id ? { ...m, favorite: true } : m\r\n        ),\r\n        mostpopular: state.mostpopular.map((p) =>\r\n         p.id === action.payload.movie.id ? { ...p, favourite: true } : p\r\n        ),\r\n        nowplaying: state.nowplaying.map((n) =>\r\n         n.id === action.payload.movie.id ? { ...n, favourite: true } : n\r\n        ),\r\n        toprated: state.toprated.map((t) =>\r\n         t.id === action.payload.movie.id ? { ...t, favourite: true } : t\r\n        ),\r\n        similar: state.similar.map((t) =>\r\n         t.id === action.payload.movie.id ? { ...t, favourite: true } : t\r\n        ),\r\n\r\n        upcoming: [...state.upcoming],\r\n      };\r\n    case \"add-watchlist\":\r\n      return {\r\n        upcoming: state.upcoming.map((m) =>\r\n          m.id === action.payload.movie.id ? { ...m, watchlist: true} : m\r\n          ),\r\n          movies: [...state.movies],\r\n          mostpopular: [...state.mostpopular],\r\n          toprated: [...state.toprated],\r\n          nowplaying: [...state.nowplaying],\r\n          similar: [...state.similar]\r\n      };\r\n    case \"load\":\r\n      return { movies: action.payload.movies, upcoming: [...state.upcoming], mostpopular: [...state.mostpopular],\r\n         toprated: [...state.toprated], nowplaying: [...state.nowplaying], similar: [...state.similar] };\r\n    case \"load-upcoming\":\r\n      return { upcoming: action.payload.movies, movies: [...state.movies], mostpopular: [...state.mostpopular],\r\n         toprated: [...state.toprated], nowplaying: [...state.nowplaying], similar: [...state.similar] };\r\n    case \"load-mostpopular\":\r\n      return { mostpopular: action.payload.movies, upcoming: [...state.upcoming], movies: [...state.movies],\r\n         toprated: [...state.toprated], nowplaying: [...state.nowplaying], similar: [...state.similar] };\r\n    case \"load-toprated\":\r\n      return { toprated: action.payload.movies, upcoming: [...state.upcoming], movies: [...state.movies],\r\n         mostpopular: [...state.mostpopular], nowplaying: [...state.nowplaying], similar: [...state.similar] };\r\n    case \"load-nowplaying\":\r\n      return { nowplaying: action.payload.movies, upcoming: [...state.upcoming], movies: [...state.movies],\r\n         mostpopular: [...state.mostpopular], toprated: [...state.toprated], similar: [...state.similar] };\r\n    case \"load-similar\":\r\n      return { similar: action.payload.movies, upcoming: [...state.upcoming], movies: [...state.movies],\r\n        mostpopular: [...state.mostpopular], toprated: [...state.toprated], nowplaying: [...state.nowplaying] };\r\n    case \"add-review\":\r\n      return {\r\n        movies: state.movies.map((m) =>\r\n          m.id === action.payload.movie.id\r\n            ? { ...m, review: action.payload.review }\r\n            : m\r\n        ),\r\n        upcoming: [...state.upcoming],\r\n        mostpopular: [...state.mostpopular],\r\n        toprated: [...state.toprated],\r\n        nowplaying: [...state.nowplaying],\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst MoviesContextProvider = (props) => {\r\n  const [state, dispatch] = useReducer(reducer, { movies: [], upcoming: [],\r\n     mostpopular: [], toprated: [], nowplaying: [] });\r\n\r\n  const addToFavorites = (movieId) => {\r\n    const index = state.movies.map((m) => m.id).indexOf(movieId);\r\n    dispatch({ type: \"add-favorite\", payload: { movie: state.movies[index], mostpopular: state.mostpopular[index],\r\n       toprated: state.toprated[index], nowplaying: state.nowplaying[index] } });\r\n  };\r\n\r\n  const addToWatchList = (movieId) => {\r\n    const index = state.upcoming.map((m) => m.id).indexOf(movieId);\r\n    dispatch({ type: \"add-watchlist\", payload: { movie: state.upcoming[index] } });\r\n  };\r\n\r\n  const addReview = (movie, review) => {\r\n    dispatch({ type: \"add-review\", payload: { movie, review } });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getMovies().then((movies) => {\r\n      dispatch({ type: \"load\", payload: { movies } });\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getUpcomingMovies().then((movies) => {\r\n      dispatch({ type: \"load-upcoming\", payload: { movies } });\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getMostPopular().then((movies) => {\r\n      dispatch({ type: \"load-mostpopular\", payload: { movies } });\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getTopRated().then((movies) => {\r\n      dispatch({ type: \"load-toprated\", payload: { movies } });\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getNowPlaying().then((movies) => {\r\n      dispatch({ type: \"load-nowplaying\", payload: { movies } });\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <MoviesContext.Provider\r\n      value={{\r\n        movies: state.movies,\r\n        upcoming: state.upcoming,\r\n        mostpopular: state.mostpopular,\r\n        toprated: state.toprated,\r\n        nowplaying: state.nowplaying,\r\n        addToFavorites: addToFavorites,\r\n        addToWatchList: addToWatchList,\r\n        addReview: addReview,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </MoviesContext.Provider>\r\n  );\r\n};\r\n\r\nexport default MoviesContextProvider;"]},"metadata":{},"sourceType":"module"}