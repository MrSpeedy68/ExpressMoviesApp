{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\MrSpeedy\\\\Desktop\\\\Local Github\\\\MoviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\MrSpeedy\\\\Desktop\\\\Local Github\\\\MoviesApp\\\\src\\\\pages\\\\homePage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"../components/headerMovieList\";\nimport MovieList from \"../components/movieList\";\nimport FilterControls from \"../components/filterControls\";\nimport StubAPI from \"../api/stubAPI\";\n\nvar MovieListPage = () => {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      titleFilter = _useState2[0],\n      setTitleFilter = _useState2[1]; // NEW\n\n\n  var _useState3 = useState(\"0\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      genreFilter = _useState4[0],\n      setGenreFilter = _useState4[1]; // NEW\n\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      movies = _useState6[0],\n      setMovies = _useState6[1];\n\n  useEffect(() => {\n    fetch(\"https://api.themoviedb.org/3/discover/movie?api_key=8b4046823b036ee3111a70918a391640&language=en-US&include_adult=false&page=1\").then(res => res.json()).then(json => {\n      console.log(json);\n      return json.results;\n    }).then(movies => {\n      setMovies(movies);\n    });\n  }, []);\n\n  var addToFavorites = movieId => {\n    // Find index position of selected movie in the list\n    var index = movies.map(m => m.id).indexOf(movieId);\n    StubAPI.add(movies[index]);\n    var updatedList = [...movies]; // Make a copy of the movie list\n\n    updatedList.splice(index, 1); // Remove selected movie from home page list\n\n    setMovies(updatedList);\n  }; // NEW BLOCK START\n\n\n  var genre = Number(genreFilter);\n  var displayedMovies = movies.filter(m => {\n    return m.title.toLowerCase().search(titleFilter.toLowerCase()) !== -1;\n  }).filter(m => {\n    return genre > 0 ? m.genre_ids.includes(Number(genreFilter)) : true;\n  });\n\n  var handleFilterChange = (type, value) => {\n    if (type === \"name\") setTitleFilter(value);else setGenreFilter(value);\n  }; // NEW BLOCK END\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    numMovies: displayedMovies.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FilterControls, {\n    onUserInput: handleFilterChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(MovieList, {\n    movies: displayedMovies,\n    buttonHandler: addToFavorites,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }), \"     \");\n};\n\nexport default MovieListPage;","map":{"version":3,"sources":["C:/Users/MrSpeedy/Desktop/Local Github/MoviesApp/src/pages/homePage.js"],"names":["React","useState","useEffect","Header","MovieList","FilterControls","StubAPI","MovieListPage","titleFilter","setTitleFilter","genreFilter","setGenreFilter","movies","setMovies","fetch","then","res","json","console","log","results","addToFavorites","movieId","index","map","m","id","indexOf","add","updatedList","splice","genre","Number","displayedMovies","filter","title","toLowerCase","search","genre_ids","includes","handleFilterChange","type","value","length"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAA0C,OAA1C;AACA,OAAOC,MAAP,MAAmB,+BAAnB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,OAAP,MAAoB,gBAApB;;AAEA,IAAMC,aAAa,GAAG,MAAM;AAAA,kBACYN,QAAQ,CAAC,EAAD,CADpB;AAAA;AAAA,MACnBO,WADmB;AAAA,MACNC,cADM,kBACgC;;;AADhC,mBAEYR,QAAQ,CAAC,GAAD,CAFpB;AAAA;AAAA,MAEnBS,WAFmB;AAAA,MAENC,cAFM,kBAEgC;;;AAFhC,mBAIEV,QAAQ,CAAC,EAAD,CAJV;AAAA;AAAA,MAInBW,MAJmB;AAAA,MAIXC,SAJW;;AAK1BX,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,KAAK,kIAAL,CAGGC,IAHH,CAGQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAHf,EAIGF,IAJH,CAIQE,IAAI,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,aAAOA,IAAI,CAACG,OAAZ;AACD,KAPH,EAQGL,IARH,CAQQH,MAAM,IAAI;AACdC,MAAAA,SAAS,CAACD,MAAD,CAAT;AACD,KAVH;AAWD,GAZQ,EAYN,EAZM,CAAT;;AAcA,MAAMS,cAAc,GAAGC,OAAO,IAAI;AAChC;AACA,QAAMC,KAAK,GAAGX,MAAM,CAACY,GAAP,CAAWC,CAAC,IAAIA,CAAC,CAACC,EAAlB,EAAsBC,OAAtB,CAA8BL,OAA9B,CAAd;AAEAhB,IAAAA,OAAO,CAACsB,GAAR,CAAYhB,MAAM,CAACW,KAAD,CAAlB;AACA,QAAMM,WAAW,GAAG,CAAC,GAAGjB,MAAJ,CAApB,CALgC,CAKC;;AACjCiB,IAAAA,WAAW,CAACC,MAAZ,CAAmBP,KAAnB,EAA0B,CAA1B,EANgC,CAMC;;AACjCV,IAAAA,SAAS,CAACgB,WAAD,CAAT;AACD,GARD,CAnB0B,CA8B1B;;;AACA,MAAME,KAAK,GAAGC,MAAM,CAACtB,WAAD,CAApB;AACA,MAAIuB,eAAe,GAAGrB,MAAM,CACzBsB,MADmB,CACZT,CAAC,IAAI;AACX,WAAOA,CAAC,CAACU,KAAF,CAAQC,WAAR,GAAsBC,MAAtB,CAA6B7B,WAAW,CAAC4B,WAAZ,EAA7B,MAA4D,CAAC,CAApE;AACD,GAHmB,EAInBF,MAJmB,CAIZT,CAAC,IAAI;AACX,WAAOM,KAAK,GAAG,CAAR,GAAYN,CAAC,CAACa,SAAF,CAAYC,QAAZ,CAAqBP,MAAM,CAACtB,WAAD,CAA3B,CAAZ,GAAwD,IAA/D;AACD,GANmB,CAAtB;;AAQA,MAAM8B,kBAAkB,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC1C,QAAID,IAAI,KAAK,MAAb,EAAqBhC,cAAc,CAACiC,KAAD,CAAd,CAArB,KACK/B,cAAc,CAAC+B,KAAD,CAAd;AACN,GAHD,CAxC0B,CA4C1B;;;AACA,sBACE,uDACE,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAET,eAAe,CAACU,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,cAAD;AAAgB,IAAA,WAAW,EAAEH,kBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,SAAD;AACE,IAAA,MAAM,EAAEP,eADV;AAEE,IAAA,aAAa,EAAEZ,cAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,UADF;AAUD,CAvDD;;AAyDA,eAAed,aAAf","sourcesContent":["import React, {useState, useEffect } from \"react\";\r\nimport Header from \"../components/headerMovieList\";\r\nimport MovieList from \"../components/movieList\";\r\nimport FilterControls from \"../components/filterControls\";\r\nimport StubAPI from \"../api/stubAPI\";\r\n\r\nconst MovieListPage = () => {\r\n  const [titleFilter, setTitleFilter] = useState(\"\");       // NEW\r\n  const [genreFilter, setGenreFilter] = useState(\"0\");      // NEW\r\n\r\n  const [movies, setMovies] = useState([])\r\n  useEffect(() => {\r\n    fetch(\r\n      `https://api.themoviedb.org/3/discover/movie?api_key=8b4046823b036ee3111a70918a391640&language=en-US&include_adult=false&page=1`\r\n    )\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        console.log(json)\r\n        return json.results\r\n      })\r\n      .then(movies => {\r\n        setMovies(movies);\r\n      });\r\n  }, []);\r\n\r\n  const addToFavorites = movieId => {\r\n    // Find index position of selected movie in the list\r\n    const index = movies.map(m => m.id).indexOf(movieId)\r\n\r\n    StubAPI.add(movies[index])\r\n    const updatedList = [...movies]  // Make a copy of the movie list\r\n    updatedList.splice(index, 1)     // Remove selected movie from home page list\r\n    setMovies(updatedList)  \r\n  }\r\n\r\n\r\n  // NEW BLOCK START\r\n  const genre = Number(genreFilter)\r\n  let displayedMovies = movies\r\n    .filter(m => {\r\n      return m.title.toLowerCase().search(titleFilter.toLowerCase()) !== -1;\r\n    })\r\n    .filter(m => {\r\n      return genre > 0 ? m.genre_ids.includes(Number(genreFilter)) : true;\r\n    });\r\n\r\n  const handleFilterChange = (type, value) => {\r\n    if (type === \"name\") setTitleFilter(value);\r\n    else setGenreFilter(value);\r\n  };\r\n  // NEW BLOCK END\r\n  return (\r\n    <>\r\n      <Header numMovies={displayedMovies.length} />\r\n      <FilterControls onUserInput={handleFilterChange} />\r\n      <MovieList\r\n        movies={displayedMovies}\r\n        buttonHandler={addToFavorites}\r\n      />     {/* CHANGED */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MovieListPage;"]},"metadata":{},"sourceType":"module"}